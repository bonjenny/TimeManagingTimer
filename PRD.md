# [PRD] 업무 일정 기록 타이머 (Work Project Scheduler)

## 1. 제품 개요

- **핵심 목적:** 업무의 시작부터 종료까지 실시간 소요 시간을 정밀하게 추적하여 개인의 업무 몰입도를 높이고, 일간/프로젝트별 업무 리포트 생성을 자동화함.
- **해결하고자 하는 페인 포인트:**
- 수동 기록 시 발생하는 시간 오차 및 기록 누락.
- 업무 간 전환 시 발생하는 '컨텍스트 스위칭' 비용 추적의 어려움.
- 동일한 게시글/카테고리 업무의 누적 소요 시간 합산 번거로움.

---

## 2. 사용자 시나리오 (User Flow)

1. **업무 생성:** 유저가 '신규(New Job)' 버튼을 클릭하고 업무 제목(필수)과 관련 게시판 종류(선택), 게시판 번호(선택), 카테고리(선택)를 입력함.
2. **타이머 작동:** 생성된 업무 리스트에서 '시작(Play)' 버튼을 눌러 측정을 개시하고, 필요에 따라 '일시정지' 또는 '완료' 처리함.
3. **현황 확인:** 간트 차트(Gantt Chart) 형태의 시간관리 뷰를 통해 당일 업무 타임라인을 시각적으로 확인함.
4. **데이터 조회:** 기간별 조회를 통해 특정 업무 및 게시판 번호별 합산 소요 시간을 확인하고 리포트를 확인함.

---

## 3. 상세 기능 요구사항

### 3.1 타이머 UI 및 구성 요소

- **업무 생성 모달:** \* `제목`: 필수 입력 필드.
- `게시판 번호`: 선택 입력 필드 (필터링 및 그룹화 기준).
- `자동 완성`: 최근 30일 내 입력했던 업무 제목을 **Local/Session Storage 또는 쿠키**에서 불러와 추천 리스트 제공.

- **제어 버튼:** 시작(Play), 일시정지(Pause), 중단(Stop), 완료(Complete) 버튼 제공.
- **상태 표시:** 현재 업무의 진행 상태(대기, 진행 중, 완료)를 직관적으로 구분.
- **타이머 목록:** 완료된 타이머는 타이머 목록에서 제외하되, "완료된 타이머 표시" 체크를 누르면 완료된 타이머를 볼 수 있다. 타이머 목록은 시작일자별, 제목별, 게시판 번호별, 종료일자별로 오름차순/내림차순 정렬 및 제목, 게시판 번호로 검색이 가능하다.
- **카테고리:** 카테고리로는 분석, 개발, 개발자테스트, 테스트오류수정, 센터오류수정, 환경세팅, 회의를 기본 제공한다. 사용자가 추가 가능하다.

### 3.2 시간 기록 및 연산 로직

- **자동 기록:** 타이머 작동 시 실시간으로 소요 시간을 누적 계산.
- **시간 출력 형식 (중요 요구사항):**
- 모든 시간 데이터는 **'분(Minutes)' 단위**와 **'시간:분(HH:MM)' 단위**를 병행 표기.
- _예: 80분 기록 시 -> "80분 / 01:20 시간"으로 자동 변환하여 출력._

- **누적 합산:** 화면 상단 또는 하단에 당일 총 작업 시간의 합계를 실시간 표기 ().

### 3.3 뷰(View) 모드 및 리포트

- **시간관리 뷰 (Gantt Chart):** 업무별 시작 시각과 종료 시각을 타임라인 바(Bar) 형태로 시각화.
- **시간 집계 리포트:**
- 동일한 `게시판 번호`를 가진 업무들을 그룹화하여 합계 시간 산출.
- 특정 기간(Date Range) 필터를 통한 데이터 조회 지원.

---

## 4. UI/UX 참고 및 개선 사항

- **기존 패턴 유지:** Ecount ERP의 깔끔한 그리드(Grid) 레이아웃과 모달 시스템을 레퍼런스로 함.
- **사용자 정의 개선 포인트:**
- 브라우저 저장소를 활용한 입력 편의성 극대화 (30일 기록 유지).
- 단순 리스트를 넘어선 시각적 타임라인(간트 차트) 강화.
- 집계 화면에서 분(min)과 시간(hh:mm)을 동시에 보여주어 데이터 직관성 확보.

---

## 5. 데이터 및 기술적 고려사항

| 필드명         | 데이터 타입   | 설명                                        |
| -------------- | ------------- | ------------------------------------------- |
| `task_id`      | String (UUID) | 업무 고유 식별자                            |
| `title`        | String        | 업무 제목 (최근 기록 추천 연동)             |
| `board_id`     | String        | '작업', '개발', 혹은 사용자가 추가 가능     |
| `board_no`     | String        | 연관 게시판/프로젝트 번호 (그룹화 키)       |
| `category`     | String        | 어떤 행위인지를 기록                        |
| `status`       | Enum          | 대기, 진행, 일시정지, 완료                  |
| `start_at`     | DateTime      | 최초 시작 시각                              |
| `end_at`       | DateTime      | 최종 완료 시각                              |
| `duration_sec` | Integer       | 실제 소요 시간(초 단위 저장 후 UI에서 변환) |
| `work_date`    | Date          | 업무 기록 날짜                              |

---

## 6. 엣지 케이스(Edge Case) 및 추가 Q&A

1. **타이머 중복 작동:** 새 타이머 시작 시 기존 진행 중인 타이머를 자동으로 일시정지(Auto-pause)
2. **비정상 종료 대응:** 브라우저를 닫거나 새로고침해도 타이머가 시작된 시간을 토대로 타이머의 시간을 보여줄 것. 타이머를 초마다 시간 새로고침할 필요가 없음. 시작시간과 종료시간만 잘 기록해두면 됨.
3. **날짜 경과 케이스:** 자정(00:00)을 넘겨서까지 업무가 지속될 경우, 해당 기록을 시작일 데이터로 합산한다. (06:00 부터 다음날 06:00까지를 하루로 본다.)
4. **수동 수정 기능:** 타이머를 켜는 것을 잊었을 경우를 대비해, 사후에 작업 시간을 수동으로 입력하거나 수정하는 기능을 허용한다.
5. **긴급 입력 기능:** 갑자기 회의가 잡힌 경우, 일단 "새로운 타이머"의 제목으로 타이머를 시작하게 하는 버튼을 추가한다. 추후 수동 수정 기능을 사용하여 제목과 게시글 번호를 수정할 수 있다.
6. **저장소 만료:** 30일이 지난 자동 완성용 데이터는 자동으로 삭제하는 로직(TTL)을 클라이언트 단에서 처리
